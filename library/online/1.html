<!doctype html>
<html lang="ru">

<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">

	<title>Общая фитопатология</title>

	<link rel="stylesheet" href="../../stylesheets/material.min.css">
	<script src="../../scripts/material.min.js"></script>

	<style>
		img {
			max-width: 100%;
			max-height: 100%;
		}

		.page-content {
			text-align: center;
		}

		#plpro-reader-page-tb {
			max-width: 30px;
		}
	</style>

	<!-- Yandex.Metrika counter -->
	<script
		type="text/javascript"> (function (m, e, t, r, i, k, a) { m[i] = m[i] || function () { (m[i].a = m[i].a || []).push(arguments) }; m[i].l = 1 * new Date(); k = e.createElement(t), a = e.getElementsByTagName(t)[0], k.async = 1, k.src = r, a.parentNode.insertBefore(k, a) })(window, document, "script", "https://mc.yandex.ru/metrika/tag.js", "ym"); ym(57619945, "init", { clickmap: true, trackLinks: true, accurateTrackBounce: true, webvisor: true }); </script>
	<noscript>
		<div><img src="https://mc.yandex.ru/watch/57619945" style="position:absolute; left:-9999px;" alt="" /></div>
	</noscript> <!-- /Yandex.Metrika counter -->
</head>

<body>
	<div class="mdl-layout mdl-js-layout mdl-layout--fixed-header">
		<main class="mdl-layout__content">
			<div class="page-content">
				<button id="plpro-reader-prev-btn" class="mdl-button mdl-button--disabled">&larr;</button>
				<input id="plpro-reader-page-tb" value="1" type="text"> / 231
				<button id="plpro-reader-next-btn" class="mdl-button">&rarr;</button>
				<div id="plpro-reader-window">
					<img src="1/page_1.svg" />
				</div>
			</div>
		</main>
	</div>

	<script>
		const PAGE_COUNT = 231;
		const READER_WINDOW = document.getElementById("plpro-reader-window");
		const CURRENT_PAGE_TB = document.getElementById("plpro-reader-page-tb");

		var currentPageNumber = 1;

		function getPagePath(pageNumber) {
			return "1/page_" + pageNumber + ".svg";
		}

		function isValidPage(pageNumber) {
			return pageNumber >= 1 && pageNumber <= PAGE_COUNT;
		}

		function showPage(pageNumber) {
			if (isValidPage(pageNumber)) {
				if (pageNumber === 1) {
					document.getElementById("plpro-reader-prev-btn").classList.add("mdl-button--disabled");
				} else {
					document.getElementById("plpro-reader-prev-btn").classList.remove("mdl-button--disabled");
				}

				if (pageNumber === PAGE_COUNT) {
					document.getElementById("plpro-reader-next-btn").classList.add("mdl-button--disabled");
				} else {
					document.getElementById("plpro-reader-next-btn").classList.remove("mdl-button--disabled");
				}

				READER_WINDOW.innerHTML = `<img src="${getPagePath(pageNumber)}"/>`;
				CURRENT_PAGE_TB.value = pageNumber;
			}
		}

		function next() {
			if (isValidPage(currentPageNumber + 1)) {
				currentPageNumber++;
				showPage(currentPageNumber)
			}
		}

		function prev() {
			if (isValidPage(currentPageNumber - 1)) {
				currentPageNumber--;
				showPage(currentPageNumber)
			}
		}

		function checkforenter(e) {
			if (e.keyCode === 13) {
				var requiredPageNumber = Number.parseInt(CURRENT_PAGE_TB.value);
				if (isValidPage(requiredPageNumber)) {
					currentPageNumber = requiredPageNumber;
					showPage(currentPageNumber)
				}
			}
		}

		document.getElementById("plpro-reader-prev-btn").addEventListener("click", prev)
		document.getElementById("plpro-reader-next-btn").addEventListener("click", next)
		CURRENT_PAGE_TB.addEventListener("keydown", checkforenter)
	</script>

</body>

</html>